# DB 모델링
- 정보화 시스템 구축을 위해 어떤 데이터가 존재하고 업무에 필요한 정보는 무엇인지 분석하는 방법
- RDB는 표의 개념으로 데이터를 구성
- 개념적 모델링 -> 논리적 모델링 -> 물리적 모델링 -> 일치성 검토 -> 개념적 모델링 ...

## 1. 개념적 모델링
- 업무 분석 단계에서 얻은 내용을 토대로 **Entity 추출**
- Entity 내의 **속성 구성**
- Entity 간의 **관계 정의**
  + 사용자의 처리현상 분석
  + 주요 Entity와 관계 파악 -> ERD 작성
  + Entity의 상세 정의
  + 식별자 정의, 식별자의 업무규칙 정의
  + Entity별 속성 상세화
  + 필요한 속성 & 영역 상세 정의
  + 속성의 업무 규칙 정의
  + 사용자와 모델 검토
![image](https://user-images.githubusercontent.com/48676089/152270209-15d0baa0-df27-42dd-af91-40b25a62caf8.png)
      
     
### 개체 (Entity)
- 사용자와 관계있는 주요 객체
- 업무 수행을 위해 데이터로 관리되어져야 하는 개체
  + ex) 학생, 직원, 학과...
      
#### 찾는 법
- 영속적으로 존재하는 것
- 새로 식별 가능한 요소를 가짐
- 반드시 속성(Attribute)를 가짐
- 명사적 표현 사용


### 속성
- 저장할 필요가 있는 Entity의 정보
- Entity의 성질, 분류, 수량, 상태, 특성...
- 속성의 개수는 **10개 내외**로 하는 것이 바람직
- 최종 DB 모델링 단계에서 **칼럼**으로 활용
- **유형**
  + 기초속성: 원래 **갖고 있는** 속성
  + 추출속성: 기초 속성을 **가공**하여 얻는 속성
  + 설계속성: 실제로 **존재하지 않음** BUT, 설계자가 임의로 부여하는 속성


### 식별자
- 한 Entity 내에서 인스턴스를 유일하게 구분할 수 있는 단일 속성 OR 속성 그룹
  + 후보키: Entity 내에서 인스턴스를 구분할 수 있는 속성. 기본키가 될 수 있는 **후보 속성**
  + **기본키**:
    * 인스턴스를 유일하게 식별하는데 가장 적합한 KEY
    * 해당 Entity를 대표할 수 있는 것
    * 업무의 활용도가 높은 것 /  길이가 짧은 것...
  + 대체키: 후보키 중 기본키로 선정되지 않은 키
  + 복합키: 둘 이상의 컬럼을 묶어서 식별자로 정의하는 경우
  + 대리키: 식별자가 너무 길거나 여러 개의 속성으로 구성될 경우 인위적으로 추가하는 식별자

### 관계
- 두 Entity 간의 업무적인 연관성 or 관련 사실
- 현재 관계 뿐만 아니라 장래에 사용될 경우도 고려
- 설정 순서
  + 관계가 있는 두 실체를 실선으로 연결 & 관계 부여
  + 관계 차수 표현
  + 선택성 표시
    * 일반적이고 상식적인 선에서 판단
    * 항상 관계를 만족해야 하는지 판단
    * 관계가 만족되지 않는 경우가 하나라도 있을 경우, **Optional**
    * 양방향 조사
    ![image](https://user-images.githubusercontent.com/48676089/152286940-002fb836-1e9f-4756-a699-0a1eb8375644.png)


#### 차수성
- 한 실체의 하나의 인스턴스가 다른 실페의 몇 개의 인스턴스와 관련될 수 있는가 정의
- 경우에 따라 발생횟수 조사
- 양방향 조사
- 종류
  + 1대1: 두 실체의 레코드가 서로 하나씩 대응
    * ex) 학과 <학과장> 교수
  + 1대N: 부모 실체의 하나의 레코드가 자식 실체의 여러 레코드에 대응
    * ex) 학과 <전공> 학생
  + N대M: 양 쪽 실체 간에 여러 개의 레코드와 관계를 맺을 수 있는 경우
    * ex) 학생 <수강> 과목


- - -

## 2. 논리적 DB 모델링
- ERD를 **Mapping Rule**을 적용하여 스키마 설계 + 정규화

### 기본키
- 후보키 중에서 선택한 주 키
- Null 값을 가질 수 없음
- 동일한 값 중복 불가
***Not Null + Unique = Primary Key***

### 외래키
- 관계를 맺는 두 Entity에서 서로 참조하는 관계의 속성으로 지정되는 키

### Mapping Rule
- 개념적 DB 모델링에서 도출된 개체 타입과 관계 타입의 테이블 정의
- 단순 Entity -> Table
- 속성        -> Column
- 식별자      -> 기본키
- 관계        -> 외래키, Table


### 정규화
- 속성간에 존재하는 함수적 종속성을 분석해서 스키마를 정제해 나가는 과정
- 데이터 중복을 제거 + 속성들을 본래의 자리에 위치시키는 것

#### 제 1 정규화
- **반복되는 그룹 속성** 제거
  + 반복되는 그룹 속성: 같은 성격과 내용의 컬럼이 연속적으로 나타나는 컬럼
- 기본 테이블의 기본키를 추가 후, **새로운 테이블 생성**
- 기존 테이블과 **1:N 관계** 형성

#### 제 2 정규화
- 복합키에 전체적으로 의존하지 않는 속성 제거
- 제 2 정규화 대상 테이블 = **키가 여러 칼럼으로 구성**된 경우
- 제 2 정규화 = **부분적 함수 종속 관계** 제거 작업

#### 제 3 정규화
- **일반 컬럼에 의존**하는 컬럼 제거
- **이행적 함수 종속 관계** 컬럼 제거


- - -

## 3. 물리적 DB 모델링
- 논리적 DB 모델링 단계에서 얻어진 DB 스키마를 더 효율적으로 구현하는 작업
- 실제 DB내의 개체들을 정의하는 단계
  + column의 타입... 등등 설정
- 인덱스 정의
- 역정규화 작업 수행

### 역정규화
- 시스템 성능을 고려하여 설계 재구성
- 정규화에 위배됨
- 테이블 재구성

#### 방법
- **데이터 중복**
  + 조인 프로세스가 많아 성능 저하를 일으키는 경우 사용
- **파생 컬럼 생성**
  + 테이블에 없는 컬럼을 조회 시 새로운 정보로 보여주는 경우
    * 집계함수로 표현되는 컬럼
- **테이블 분리**
  * 기준 = 컬럼 수 / 레코드 양...
- **요약 테이블 생성**: 조회 프로세스를 줄이기 위함
- **테이블 통합**: 분리된 두 테이블이 시스템 성능에 영향을 끼칠 경우 고려
